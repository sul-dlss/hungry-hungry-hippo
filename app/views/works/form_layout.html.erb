<%= tag.div data: {
      controller: 'ahoy-form-changes unsaved-changes',
      action: 'change->ahoy-form-changes#changed change->unsaved-changes#changed beforeunload@window->unsaved-changes#leavingPage turbo:before-visit@window->unsaved-changes#leavingPage',
      ahoy_form_changes_ahoy_value: Settings.ahoy.form_changes,
      ahoy_form_changes_form_id_value: @work_form.form_id
    } do %>
  <% content_for :breadcrumbs do %>
    <%= render Elements::BreadcrumbNavComponent.new do |component| %>
      <% component.with_breadcrumb(text: 'Dashboard', link: dashboard_path) %>
      <% component.with_collection_breadcrumb(text: @collection.title, link: collection_path(@work_form.collection_druid)) %>
      <% if (current_page?(action: :new) || (controller.action_name == 'create')) %>
        <% component.with_breadcrumb(text: I18n.t('works.edit.no_title')) %>
      <% else %>
        <% component.with_title_breadcrumb(text: @work_form.title, link: work_path(@work)) %>
        <% component.with_breadcrumb(text: t('works.edit.breadcrumb')) %>
      <% end %>
    <% end %>
  <% end %>
  <%= render Elements::HeadingComponent.new(level: :h1, variant: :h2, text: @work_form.title || t('works.edit.no_title'), classes: 'mb-3') %>
  <%= render Works::Show::ReviewRejectedComponent.new(work: @work) if @work %>
  <%= render Elements::AlertComponent.new(variant: :danger, value: t('messages.validation')) if defined?(@valid) && !@valid %>
  <%= yield(:content) %>
<% end %>
