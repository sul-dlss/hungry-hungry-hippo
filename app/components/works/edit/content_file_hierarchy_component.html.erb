<% new_path_parts.each.with_index(path_parts.length - new_path_parts.length) do |filepath_part, level| %>
  <% component.with_row_branch(level: level + 1, label: filepath_part, empty_cells: 2) do |row_component| %>
    <% row_component.with_cell do %>
      <%= render Works::Edit::ContentFolderUploadComponent.new(path: upload_path_for(level)) %>
    <% end %>
  <% end %>
<% end %>

<% component.with_row_leaf(level: path_parts.length + 1, label: filename, badge_content:) do |row_component| %>
  <% row_component.with_cell do %>
    <%= render Works::Edit::ContentFileDescriptionComponent.new(content_file:) %>
  <% end %>
  <% row_component.with_cell do %>
    <%= render Works::Edit::ContentFileHideComponent.new(content_file:) %>
  <% end %>
  <% row_component.with_cell do %>
    <%= render Works::Edit::ContentFileDeleteComponent.new(content_file:) %>
  <% end %>
<% end %>
